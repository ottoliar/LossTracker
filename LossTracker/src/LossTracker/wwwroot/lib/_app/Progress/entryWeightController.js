!function(){"use strict";function e(e,t,s){function n(){u.noEntries=!1,u.weightChartLabels=[],u.waistChartLabels=[],u.weightData=[[]],u.waistData=[[]],u.weightColours=["#FF851B","#FFFFFF","#FFFFFF"],u.waistColours=["#4b6cb7","#4b6cb7","#4b6cb7"],u.weightOptions={tooltipTemplate:"<%=label%>: <%=value%> lbs",scaleShowGridLines:!0,scaleGridLineColor:"#FFFFFF",scaleGridLineWidth:.1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0},u.waistOptions={tooltipTemplate:"<%=label%>: <%=value%> inches",scaleShowGridLines:!0,scaleGridLineColor:"#FFFFFF",scaleGridLineWidth:.1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0};for(var e=0;e<u.measurements.length;e++){var t=u.measurements[e];a(t),h.push(t.id)}}function a(e){var s=t("date")(e.created,"shortDate");u.weightChartLabels.push(s),u.waistChartLabels.push(s),u.weightData[0].push(e.weightLbs),u.waistData[0].push(e.waistInches)}function i(e){for(var t=0;t<h.length;t++)e===h[t]&&(h.splice(t,1),u.waistChartLabels.splice(t,1),u.weightChartLabels.splice(t,1),u.weightData[0].splice(t,1),u.waistData[0].splice(t,1),0===h.length&&(u.noEntries=!0))}function r(){u.measurements=s.getMeasurements();var e=u.measurements.length;return 0===e?void(u.noEntries=!0):(u.noEntries=!1,u.newMeasurement.weightLbs=u.measurements[e-1].weightLbs,u.newMeasurement.waistInches=u.measurements[e-1].waistInches,void n())}function l(){u.error="Error retrieving measurements from database"}function o(){u.loadIsBusy=!0,s.fetchMeasurements().then(r,l)["finally"](function(){u.loadIsBusy=!1})}var u=this,h=[];u.newMeasurement={weightLbs:null,waistInches:null},u.addEntry=function(){null!=u.newMeasurement.weightLbs&&null!=u.newMeasurement.waistInches&&s.addMeasurement(u.newMeasurement.weightLbs,u.newMeasurement.waistInches)},u.deleteEntry=function(e){s.deleteMeasurement(e)},e.$on("measurementAdded",function(e,t){if(1===u.measurements.length)n();else{var s=u.measurements.length-1;a(u.measurements[s])}h.push(t.id)}),e.$on("measurementDeleted",function(e,t){i(t)}),o()}e.$inject=["$rootScope","$filter","weightTracker"],angular.module("appProgress").controller("entryWeightController",e)}();